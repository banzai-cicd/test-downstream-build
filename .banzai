@Library('Banzai@custom-stages') _
banzai([
  appName: 'test-downstream-build',
  preCleanWorkspace: true,
  flowdock: [
    /.*/: [
      credId: 'banzai-flowtoken',
      author: [
        name: 'Banzai',
        avatarUrl: 'https://github.build.ge.com/avatars/u/55576?s=400&u=700c7e70356d1f5a679908c1d7c7e5bf8e2beab6',
        email: 'banzai@ge.com'
      ]
    ]
  ],
  stages: [
    [
      name: 'build'
    ],
    [
      name: 'scans:vulnerability'
    ],
    [
      name: 'publish'
    ]
  ],
  build: [
    /.*/: [:]
  ],
  publish: [
    /.*/: [:]
  ],
  vulnerabilityScans: [
    /develop|master/: [
      [
        type: 'coverity',
        credId: 'coverity-auth-key-file',
        toolId: 'coverity-2018.12',
        serverHost: 'coverity.power.ge.com',
        serverPort: '443',
        resultEmails: ['banzai@ge.com'],
        buildCmd: "echo 'we did it! we ran a coverity scan!'",
        projectName: '1000373486_mdi',
        abortOnError: false
      ]
    ]
  ]
])