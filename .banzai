@Library('Banzai@banzai-base-stage') _
banzai([
  appName: 'test-downstream-build',
  preCleanWorkspace: true,
  stages: [
    [ name: 'build' ],
    [
      name: 'My Arbitrary Stage',
      steps: [
        /.*/: [
          [
            closure: { logger "YO I RAN A GROOVY CLOSURE FROM A CUSTOM STAGE!" }
          ], 
          [
            script: 'customStageScript.sh'
          ]
        ]
      ]
    ],
    [ name: 'publish' ]
  ],
  build: [
    /.*/: [:]
  ],
  publish: [
    /master/: [:]
  ],
  deploy: [
    /master/: [:]
  ],
  flowdock: [
    banzaiFlow: [
      credId: 'banzai-flowtoken',
      author: [
        name: 'Banzai',
        avatarUrl: 'https://github.build.ge.com/avatars/u/55576?s=400&u=700c7e70356d1f5a679908c1d7c7e5bf8e2beab6',
        email: 'banzai@ge.com'
      ]
    ]
  ],
  email: [
    addresses: [
      simon: 'simon.townsend1@ge.com',
      banzai: 'banzai@ge.com'
    ],
    groups: [
      everyone: ['simon'],
    ]
  ],
  notifications: [
    flowdock: [
      /.*/: [
        'banzaiFlow': ['.*']
      ]
    ],
    email: [
      /.*/: [
        groups: [
          'everyone': ['PIPELINE:(FAILURE|SUCCESS)']
        ],
        individuals: [
          'simon': ['PIPELINE:PENDING']
        ]
      ]
    ]
  ]
])